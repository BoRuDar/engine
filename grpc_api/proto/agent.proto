syntax = "proto3";

import "const.proto";

package engine;

service AgentApi {
    // POST /call_center/agent
    rpc Create(Agent) returns (Agent) {}
    // GET /call_center/agent
    rpc List(ListRequest) returns (ListAgent) {}
    // GET /call_center/agent/:ID
    rpc Get(ItemRequest) returns (Agent) {}
    // PUT /call_center/agent/:ID
    rpc Update(Agent) returns (Agent) {}
    // DELETE /call_center/agent/:ID
    rpc Remove(ItemRequest) returns (Agent) {}
    // PATCH /call_center/agent/:ID/status
    rpc UpdateStatus(AgentStatusRequest) returns (Response) {}

//    rpc AddSkill(SkillAgent) returns (SkillAgent) {}
}

message SkillAgent {
    int64 id = 1;
    Lookup skill = 2;
    Lookup agent = 3;
    int32 capacity = 4;
}

message AgentStatusRequest {
    int64 id = 1;
    int64 domain_id = 2;

    enum Status {
        ONLINE = 0;
        OFFLINE = 1;
        PAUSE = 2;
    }

    string status = 3; //FIXME enumerate
}

message Agent {
    int64 id = 1;
    int64 domain_id = 2;
    Lookup user = 3;
    string status = 4;
    string state = 5;
    string description = 7;
}

message ListAgent {
    repeated Agent items = 1;
}
